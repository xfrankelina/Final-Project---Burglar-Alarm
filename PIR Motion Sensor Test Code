#include <stdio.h>
#include <wiringPi.h>

#define PIR_PIN 27 
int main(void) {
    if (wiringPiSetupGpio() == -1) {
        printf("wiringPiSetupGpio failed.\n");
        return 1;
    }

    pinMode(PIR_PIN, INPUT);
    printf("PIR test started. Move in front of the sensor...\n");

    int lastState = -1;

    while (1) {
        int state = digitalRead(PIR_PIN);
        if (state != lastState) {
            lastState = state;
            if (state == HIGH) {
                printf("MOTION DETECTED! (GPIO27 HIGH)\n");
            } else {
                printf("No motion. (GPIO27 LOW)\n");
            }
        }
        delay(100);  
    }

    return 0;
}
